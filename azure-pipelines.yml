# Starter pipeline

# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:
  name: Self_Hosted

steps:
- script: echo Hello, world!
  displayName: 'Run a one-line script'

- script: |
    echo Add other tasks to build, test, and deploy your project.
    echo See https://aka.ms/yaml
  displayName: 'Run a multi-line script'
- task: CmdLine@2
  displayName: 'Run TotalTest CLI'
  inputs:
    script: |
      "$(cliPath)\TotalTestFTCLI.bat" ^
      -f "$(testScenarioPath)" ^
      -R -g TTTReport -G -v 6 -l CLI -log "All" ^
      -u "$(userId)" -p "$(password)" ^
      -cfgdir "$(configPath)" ^
      -ccrepo "$(ccRepo)" -ccsystem "$(ccSystem)" -cctestid "$(ccTestId)" ^
      -e "$(envId)"

- task: CmdLine@2
  displayName: 'Show CLI Log'
  inputs:
    script: |
      echo "After CLI execution"
      CD "C:\runtime\TotalTest-2503\CWK8000\Output\bmc.log"